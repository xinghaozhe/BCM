/******************************************************************************/
/*******************************项目更改记录***********************************/
/*  项目名称: BCM CV101 平台                                                  */
/*  文档创建:雷泽东
/*  本文档创建日期:2008.03.31  
/*  开始执行日期  :2008.04.01
/******************************************************************************/
/*  功能说明:记录本系统程序更改详细情况,增删功能情况
/*  记录规范:每条记录必须包含,更改时间\参与更改人员\更改内容\更改后状态
/*  格    式:更改时间:
/*           更改人员:
/*           更改内容:
/*           更改状态:
/******************************************************************************/
/*     2008年3月份  根据长安CV8实车调试程序有大量更改,和功能变动.
/*                  基本功能测试基本完成,除非进行实车测试或有明确
/*                  功能变动外不能随意更改
/******************************************************************************/
/* 更改时间:2008.03.26
/* 更改人员:雷泽东
/* 更改内容:1安全带报警,只有上电第一次报警正常.
/*          2顶灯,增加RKE解琐点亮功能
/*          3转向灯失效检测,功能已经加上门限值需修改
/* 更改状态:未实车测试
/******************************************************************************/
/******************************************************************************/
/* 更改时间:2008.04.09
/* 更改人员:雷泽东
/* 更改内容:1.CAN接收程序增加  can.c   CANRX()
            2.BCM与TEST通信程序CAN   can.c   CANRX():ID7d8
            3.重新封装CAN 发送程序 can.c   CANSEND1
            4.RKE学习数量嘟读取   RKEnumberRead()
            5.RKE学习流程更改，取消IGN开关进入学习模式，TEST是唯一进入RKE学习模式的途径
/* 更改状态:未实车测试，CAN扣方真实现。
/****************************************************************************/
/******************************************************************************/
/* 更改时间:20080410
/* 更改人员:雷泽东
/* 更改内容:1.BCM进入低功耗模式前关闭CAN中断接收功能    增加
              BCM退出低功耗模式后打开CAN中断接收功能    增加
            2.新增加RKE钥匙序列号初始化功能函数 
              INITrkenumber();原程序在RKE_DRV1.C
              此函数只能在程序启动进入主循环前调用，只有程序第一次运行时有效
              初始化完成后所有RKE序列号为0X00000000            
/* 更改状态:未实车测试
/******************************************************************************/
/******************************************************************************/
/* 更改时间:20080411
/* 更改人员:雷泽东
/* 更改内容:1.Lock_drv.c    331行注释掉
            2.can通信频率改为500K
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:20080414
/* 更改人员:雷泽东
/* 更改内容:1增加启动关闭CAN函数void CANenble(void)
            2增加TESTER解出设防
            3更改进入RKE学习模式后首先檫除全部RKE序列号
            4中控闭锁输入信号增加滤波处理
            5增加清除故障代码DTC函数
            6增加写入故障代码DTC函数void WriteDTC(u16 DTCvalue)
            7增加故障代码发送程序void SendDTC(void)
            8增加故障代码发送数据格式转换程序void SendOnesData(uchar number)
/* 更改状态:程序更改中
/******************************************************************************/
/******************************************************************************/
/* 更改时间:20080415
/* 更改人员:雷泽东
/* 更改内容:1 增加void DiagDTCnumber(void)
            2 增加void BatteryDTC(void);
            3 增加void MMXG3b01(u8 mode ,u8 Rxcnt);
            4 增加void Command3BFX(u8 Rxcnt);
            5 增加void CommonPIDdiag(void)
/* 更改状态:程序更改中
/******************************************************************************/
/******************************************************************************/
/* 更改时间:20080416
/* 更改人员:雷泽东
/* 更改内容:1.完善void CommonPIDdiag(void)
            2.增加 void DiagPIDsendChange(u8 commoned1,u8 commoned2,
                                                   u8 *PIDdata,u8 Datalong)
            3.增加void DiagPIDsend(void)
            4.TEST通信中增加COMMONID PID发送通信协议
            5.增加void WiperDTC(void)
            6.增加void WiperParkDTC(void)
            7.增加void CentralLockDTC(void)
            8.增加void FWiperINTOutDTC(void)
            9.增加void TurnCircuitDTC(void)
/* 更改状态:程序更改中
/******************************************************************************/
/******************************************************************************/
/* 更改时间:20080417
/* 更改人员:雷泽东
/* 更改内容:1.对20080414-20080416新增加内容进行更改调试，与上位机通信基本正常
　　　　　　2.中控锁无故闭锁原因找到将20080411更改第一条恢复,将ＡＤ采样改回求平均值
　　　　　　3.CAN通信启动与停止条件更改为以点火开关状态为准，即点火开关为ＯＮ时
            启动ＣＡＮ通信否则关闭ＣＡＮ通信
/* 更改状态:需要与诊断仪进行匹配
/******************************************************************************/

/******************************************************************************/
/* 更改时间:20080418
/* 更改人员:雷泽东
/* 更改内容:1.增加void TrunkDiagDTC(void)
            2.增加void SaverBatteryDTC(void)
            3.增加void RearWindowDTC(void)
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:20080420	
/* 更改人员:雷泽东
/* 更改内容:1.驾驶员单独开锁功能逻辑有错误更改
            2.CAN接收函数有修改命令B1 00 处理有改动
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:20080504-20080508
/* 更改人员:雷泽东
/* 更改内容:1.CAN接收函数结构更改
            2.CAN3B01命令中系统配置处理部分更改
            3.刹车减速部分更改//取刹车速度时还得确认速度值
            4.下线匹配流程重新设计了方案
            5.
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:20080509	
/* 更改人员:雷泽东
/* 更改内容:1.增加车型配置
            2.车型定义，按车型自动配置
            3.增加LIN通信澹(调试之中)
            4.更改LIN对车窗的控制
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:20080611	
/* 更改人员:雷泽东		
/* 更改内容:优化MAIN函数结构
/* 更改状态:测试完成未影响正常功能
/*软件版本号:更改为00086203                                                                          */
/******************************************************************************/
/******************************************************************************/
/* 更改时间:20080612
/* 更改人员:雷泽东
/* 更改内容:暂时取消睡眠的模糊时间控制，改为常数
/* 更改状态:更改测试完成
/******************************************************************************/
/******************************************************************************/
/* 更改时间:200806
/* 更改人员:雷泽东
/* 更改内容:实车匹配LIN总线调试更改
                            根据周晶杰功能核实更改共有15项
                            1雨刮回位有反弹(硬件更改实现)
                            2后雾灯逻辑错误
                            3门未关报警频率错误改为2HZ
                            4顶灯逻辑错误
                            5开闭锁转向灯频率太快，自动闭锁逻辑错误
                            6进入设防状态时间改为5S
                            7喇叭报警改为频率
                            8内部闭锁键程序故障
                            9灯未关报警只能激活一次
                            10跟随回家时间错误
                            11车窗防夹报警功能未增加
                            12RKE单独解锁功能错误更改遥控器程序
                            13报警被触发第一次按遥控器仅解除报警不能解除设防
                            14安全带报警主驾改为6次
                            15速度感应中央门锁学习功能
                            16除霜按键程序故障
/* 更改状态:已经测试通过
/******************************************************************************/
/******************************************************************************/
/* 更改时间:20080720
/* 更改人员:雷泽东
/* 更改内容:根据长安陈华功能测试有如下更改
                            1门未关改未2HZ    钥匙未拔改为1HZ
                              灯未关改为0.5HZ
                            2雨刮在PARK状态时突然开关会有反弹，将PARK信号改
                              为边沿触发方式
                            3转向变道道转向时应立即切换，更改优先级
/* 更改状态:已经更改测试通过
/******************************************************************************/
/******************************************************************************/
/* 更改时间:20080723
/* 更改人员:雷泽东
/* 更改内容:根据长安周晶杰功能验证更改如下
                           1先有灯未关再有钥匙未拔然后关上门灯未关功能会一直有效
                           2回家功能被激活后近光灯开关打到非OFF的任意位置为关
                           3有灯未关不能激活回家功能
                           4行车自动闭锁功能仅IGN为ON时才可以学习
                           5后备箱开关锁改为有中控锁状态决定
                           6热保护10次10秒不准确
                           7中控解闭锁开关改为再IGN为OFF时仍然有效
                           8门未关有闭锁命令轰鸣器与转向灯同时叫闪3次
                           9门锁驱动时间改为200MS
                           10有点火钥匙在时按解闭锁不能进入设防状态
                           11门打开RKE也可解除报警
                           12防盗指示灯一直有效闪烁
                           13刹车报警激活后速度降到96KM/H以下同样要报警直到速度增加或停车
                           14LIN总线需要一直发点火要是状态
                           
/* 更改状态:以上功能已经全部更改
/******************************************************************************/
/******************************************************************************/
/* 更改时间:20080725
/* 更改人员:雷泽东
/* 更改内容:实车测试新发现问题更改如下
                            1安全带 20次触发后再次触发未清楚状态
                            2顶灯点火钥匙再OFF档后按遥控闭锁顶灯灭但再次IGN到OFF
                              顶灯亮后立即灭掉
                            3更改回家功能时将近光灯的正常功能给屏蔽掉了
                            4减速报警触发后若出现左右转向的处理应更改
                            5车内开闭锁开关开闭锁时转向灯为闪烁
                            6报警被触发后取消报警时转向灯闪四次的同时轰鸣器也应该叫4声
/* 更改状态:以上功能已经更改
/******************************************************************************/
/******************************************************************************/
/* 更改时间:20081128
/* 更改人员:雷泽东
/* 更改内容:1 顶灯IGN由ON到OFF后如果此时门为关闭状态延时30S有更改
                            2中控锁RKE关闭时有门打开时不闭锁取消后备箱限制
                            3刹车报警V101不用此功能取消
/* 更改状态:以上功能已经更改
/******************************************************************************/
/******************************************************************************/
/* 更改时间:20081201
/* 更改人员:雷泽东
/* 更改内容:1 增加雨刮PARK信号对电机的保护，雨刮20秒无PARK信号等开关关闭后强行关闭雨刮驱动

/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:20081202
/* 更改人员:雷泽东
/* 更改内容:1 更改诊断故障代码读取DTC程序     
                            2 更改车型配置取消使能限制，厂商代号可能是导致诊断仪死机的原因
                            
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:20090504
/* 更改人员:雷泽东
/* 更改内容:1.门未关报警改为叫两次
                            2.遥控器低电压报警方式更改
/* 更改状态:完成
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
/******************************************************************************/
/* 更改时间:
/* 更改人员:
/* 更改内容:
/* 更改状态:
/******************************************************************************/
























